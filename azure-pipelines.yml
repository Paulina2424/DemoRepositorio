variables:
  imageName: 'pipelines-javascript-docker'
stages:
  - stage: Build
    jobs:
      - job: BuildMS
        pool:
          vmImage: 'ubuntu-latest'
        steps:
          - script: chmod 777 gradlew
            name: permisos
          - script: ./gradlew build
            name: build
  - stage:
      steps:
      - task: Docker@2
        displayName: Login to ACR
        inputs:
          command: login
          containerRegistry: dockerRegistryServiceConnection1
      - task: Docker@2
        displayName: Login to Docker Hub
        inputs:
          command: login
          containerRegistry: dockerRegistryServiceConnection2
      - task: Docker@2
        displayName: Build and Push
        inputs:
          command: buildAndPush
          repository: contosoRepository
          tags: |
            tag1
            tag2
